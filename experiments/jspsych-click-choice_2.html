<!doctype html>
<html>
<head>
  <script src="../static/js/jspsych-4.3/js/jquery.min.js"></script>
  <script src="../static/js/jspsych-4.3/js/jquery-ui.min.js"></script>
  <script src="../static/js/jspsych-4.3/jspsych.js"></script>
  <script src="../static/js/jspsych-4.3/plugins/jspsych-click-choice.js"></script>
  <script src="../static/js/jspsych-4.3/plugins/jspsych-instructions.js"></script>
  <script src="../static/js/jspsych-4.3/plugins/jspsych-html.js"></script>
  <script src="../static/js/practice_debrief.js"></script>
  <script src="../static/js/progressbar.min.js"></script>
  <link rel="stylesheet" href="../static/js/jspsych-4.3/css/jspsych.css">
  <link rel="stylesheet" href="../static/js/jspsych-4.3/css/jquery-ui.css">
</head>
<body>
<div id="jspsych-target"></div>
</body>
<script>
  /* FILTERS */
  // these are currently imported
  /* END FILTERS */
  
    var keep_1_instr = {
    type: 'instructions',
    pages: [
            
                'KEEP ROUND',
            
                'go!',
            
            ],
    show_clickable_nav: true
}
  
    var keep_1 = {
    type: 'click-choice',
    stimuli: [
            
                [
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0101_73924_2',
                        'x':31,
                        'y':141,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0035_28014_1',
                        'x':233,
                        'y':141,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0061_15368_1',
                        'x':435,
                        'y':141,
                        'height':132,
                        'width':198
                    },
                    
                ],
            
                [
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0003_103614_1',
                        'x':181,
                        'y':240,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0005_56866_1',
                        'x':383,
                        'y':240,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0051_56818_2',
                        'x':585,
                        'y':240,
                        'height':132,
                        'width':198
                    },
                    
                ],
            
        ],
    post_click_delay: 100,
    response_ends_trial: true,
    action_type: 'keep',
    prompt: '',
    trial_time: 1500
}
  
    var reject_1_instr = {
    type: 'instructions',
    pages: [
            
                'REJECT ROUND',
            
                'go!',
            
            ],
    show_clickable_nav: true
}
  
    var reject_1 = {
    type: 'click-choice',
    stimuli: [
            
                [
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0101_73924_2',
                        'x':170,
                        'y':45,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0035_28014_1',
                        'x':372,
                        'y':45,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0061_15368_1',
                        'x':574,
                        'y':45,
                        'height':132,
                        'width':198
                    },
                    
                ],
            
                [
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0003_103614_1',
                        'x':90,
                        'y':150,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0005_56866_1',
                        'x':292,
                        'y':150,
                        'height':132,
                        'width':198
                    },
                    
                    {
                        'file':'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
                        'id':'0051_56818_2',
                        'x':494,
                        'y':150,
                        'height':132,
                        'width':198
                    },
                    
                ],
            
        ],
    post_click_delay: 150000,
    response_ends_trial: true,
    action_type: 'reject',
    prompt: '',
    trial_time: 150000
}
  

    var practice = false;

  var debrief = {
    type: 'instructions',
    pages: [function() {return get_rt_string(300);},
            function() {return get_missed_string(0.1);},
            function() {return get_bias_string(0.9);},
            function() {return get_contradictions_string(0.1, 'interesting');}],
    show_clickable_nav: true
  }

  var check_demographics = function(elem) {
    if (!$("input:radio[name=gender]").is(":checked")){
      alert("You must indicate your gender.");
      return false;
    }
    if (!$("input:radio[name=age]").is(":checked")){
      alert("You must indicate your age.");
      return false;
    }
    if (!$("input:radio[name=location]").is(":checked")){
      alert("You must indicate your location.");
      return false;
    }
    jsPsych.data.write({
      "gender":$('input[name=gender]:checked').val(),
      "age":$('input[name=age]:checked').val(),
      "location":$('input[name=location]:checked').val()
      });
    return true
  }

  var demo = {
    type:'html',
    pages: [{url: "external_html/demographics.html", cont_btn: "start", check_fn: check_demographics}]
  }

  var images = [
        
            'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_0.jpg',
            'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_1.jpg',
            'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_2.jpg',
            'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_3.jpg',
            'file:///media/nick/d216eb37-b0e1-478c-b170-2270d7699ea21/repos/mturk_task_v2/images/starwars_4.jpg',

        
    ];

var circle = new ProgressBar.Circle('#jspsych-target', {
color: '#FCB03C',
strokeWidth: 3,
trailWidth: 1,
duration: 1000,
text: {
    value: '0'
},
step: function(state, bar) {
    bar.setText((bar.value() * 100).toFixed(0));
}
});

function updateLoadedCount(nLoaded){
  var percentcomplete = nLoaded / images.length;
  circle.animate(percentcomplete);
}

jsPsych.preloadImages(images, function(){ startExperiment(); }, function(nLoaded) { updateLoadedCount(nLoaded); });


  function clearBox(elementID){
    document.getElementById(elementID).innerHTML = "";
  }

var experiment_structure = [
    
        keep_1_instr,
    
        keep_1,
    
        reject_1_instr,
    
        reject_1,
    
];

if (practice) {
    experiment_structure.splice(0, 0, demo);
    experiment_structure.push(debrief);
}

  function startExperiment(){
    //clearBox("jspsych-target");
    jsPsych.init({
      display_element: $('#jspsych-target'),
      experiment_structure: experiment_structure,
      on_finish: function() {
            if (practice){
                jsPsych.data.addProperties({
                    "is_practice":practice,
                    "passed_practice":passed_practice
                })
            } else {
                jsPsych.data.addProperties({
                    "is_practice":practice,
                    "passed_practice":true
                })
            }
            var turk_info = jsPsych.turk.turkInfo();
            jsPsych.data.addProperties({
                "assignmentId": turk_info.assignmentId,
                "hitId": turk_info.hitId,
                "workerId": turk_info.workerId,
                "previewMode": turk_info.previewMode,
                "outsideTurk": turk_info.outsideTurk
            })
            jsPsych.data.displayData('csv');
      }
    });
  }
</script>
</html>